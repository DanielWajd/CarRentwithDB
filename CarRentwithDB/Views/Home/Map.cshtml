@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@using CarRentwithDB.ViewModels
@model MapViewModel
@{
    ViewData["Title"] = "Mapa";
}
@* Z dokumentacji Leaflet Quick Start Guide *@
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin="" />

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>

<h1 class="text-center mb-5">Gdzie możesz nas znaleźć</h1>
<div class="container my-4">
    <div class="row">
        <div class="col-md-4 shadow rounded h-100">
            <h4 class="mb-3">Miasta, w których jesteśmy:</h4>
            <ul class="list-unstyled">
                @foreach (var city in Model.Cities)
                {
                    <li class="mb-2 d-flex align-items-center">
                        <i class="bi bi-geo-alt-fill text-success me-3 "></i>
                        <span class="fw-bold">@city</span>
                    </li>
                }
            </ul>
            <div class="border-top pt-3">
                <h5 class="mb-3">Godziny otwarcia:</h5>
                <ul class="list-unstyled text-muted small">
                    <li><strong>Poniedziałek - Piątek:</strong> 08:00 – 20:00</li>
                    <li><strong>Sobota:</strong> 10:00 – 16:00</li>
                    <li><strong>Niedziela:</strong> Nieczynne</li>
                </ul>
            </div>
        </div>
        <div class="col-md-8">
            <div class="shadow-lg rounded"id="map"></div>
        </div>
    </div>
</div>


<style>
    #map {
        width: 100%;
        height: 70vh;
        margin: 0;
        padding: 0;
        border-radius: 15px;
    }

</style>

<script>
    var map = L.map('map', {
        center: [52.11, 19.21],
        zoom: 6,
        scrollWheelZoom: false
    });
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    const cityList = @Html.Raw(Json.Serialize(Model.Cities));
    const cityCoordinates = {
        "Warszawa": [52.22826, 21.01334],
        "Rzeszów": [50.04115, 21.98980],
        "Wrocław": [51.10823, 17.03847],
        "Lublin": [51.24933, 22.57808],
        "Kraków": [50.06354, 19.93955],
        "Gdańsk": [54.35205, 18.64516],
        "Poznań": [52.40692, 16.93866],
        "Katowice": [50.26413, 19.02583],
        "Łódź": [51.75855, 19.45774],
        "Szczecin": [53.42806, 14.53529],
        "Bydgoszcz": [53.12331, 18.00679],
        "Olsztyn": [53.77936, 20.47961],
        "Opole": [50.66825, 17.92482],
        "Zielona Góra": [51.93737, 15.50920],
        "Kielce": [50.86629, 20.62758],
        "Torun": [53.01466, 18.59801]
    };
    cityList.forEach(city => {
        const coords = cityCoordinates[city];
        if (coords) {
            L.marker(coords).addTo(map).bindPopup(`<b>${city}</b>`).openPopup();
        }
    });
</script>

